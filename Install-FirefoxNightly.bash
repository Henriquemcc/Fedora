#!/bin/bash

# Variables
version="141.0a1"
language="en-US"
download_url="https://download-installer.cdn.mozilla.net/pub/firefox/nightly/latest-mozilla-central/firefox-${version}.${language}.linux-x86_64.tar.xz"
download_filename="firefox-nightly-${version}.${language}.tar.xz"
download_path="/tmp/${download_filename}"
extract_dest_dir="/tmp/firefox-nightly"
installation_dir="$HOME/.local/share/firefox-nightly"

# Downloading
curl -L "$download_url" --output "$download_path"

# Extracting
mkdir -p "$extract_dest_dir"
tar -xvf "$download_path" -C "$extract_dest_dir"

# Moving extracted folder
mkdir -p "$(dirname "$installation_dir")"
mv "$extract_dest_dir/firefox" "$installation_dir"

# Creating shortcut
{
  echo "[Desktop Entry]"
  echo "Version=1.0"
  echo "Name=Firefox Nightly"
  echo "GenericName=Web Browser"
  echo "GenericName[ca]=Navegador web"
  echo "GenericName[cs]=Webový prohlížeč"
  echo "GenericName[es]=Navegador web"
  echo "GenericName[fa]=مرورگر اینترنتی"
  echo "GenericName[fi]=WWW-selain"
  echo "GenericName[fr]=Navigateur Web"
  echo "GenericName[hu]=Webböngésző"
  echo "GenericName[it]=Browser Web"
  echo "GenericName[ja]=ウェブ・ブラウザ"
  echo "GenericName[ko]=웹 브라우저"
  echo "GenericName[nb]=Nettleser"
  echo "GenericName[nl]=Webbrowser"
  echo "GenericName[nn]=Nettlesar"
  echo "GenericName[no]=Nettleser"
  echo "GenericName[pl]=Przeglądarka WWW"
  echo "GenericName[pt]=Navegador Web"
  echo "GenericName[pt_BR]=Navegador Web"
  echo "GenericName[sk]=Internetový prehliadač"
  echo "GenericName[sv]=Webbläsare"
  echo "Comment=Browse the Web"
  echo "Comment[ca]=Navegueu per el web"
  echo "Comment[cs]=Prohlížení stránek World Wide Webu"
  echo "Comment[de]=Im Internet surfen"
  echo "Comment[es]=Navegue por la web"
  echo "Comment[fa]=صفحات شبکه جهانی اینترنت را مرور نمایید"
  echo "Comment[fi]=Selaa Internetin WWW-sivuja"
  echo "Comment[fr]=Navigue sur Internet"
  echo "Comment[hu]=A világháló böngészése"
  echo "Comment[it]=Esplora il web"
  echo "Comment[ja]=ウェブを閲覧します"
  echo "Comment[ko]=웹을 돌아 다닙니다"
  echo "Comment[nb]=Surf på nettet"
  echo "Comment[nl]=Verken het internet"
  echo "Comment[nn]=Surf på nettet"
  echo "Comment[no]=Surf på nettet"
  echo "Comment[pl]=Przeglądanie stron WWW "
  echo "Comment[pt]=Navegue na Internet"
  echo "Comment[pt_BR]=Navegue na Internet"
  echo "Comment[sk]=Prehliadanie internetu"
  echo "Comment[sv]=Surfa på webben"
  echo "Exec=${installation_dir}/firefox %u"
  echo "Icon=${installation_dir}/browser/chrome/icons/default/default128.png"
  echo "Terminal=false"
  echo "Type=Application"
  echo "MimeType=text/html;text/xml;application/xhtml+xml;application/vnd.mozilla.xul+xml;text/mml;x-scheme-handler/http;x-scheme-handler/https;"
  echo "StartupNotify=true"
  echo "Categories=Network;WebBrowser;"
  echo "Keywords=web;browser;internet;"
  echo "Actions=new-window;new-private-window;profile-manager-window;"
  echo ""
  echo "X-Desktop-File-Install-Version=0.26"
  echo ""
  echo "[Desktop Action new-window]"
  echo "Name=Open a New Window"
  echo "Name[ach]=Dirica manyen"
  echo "Name[af]=Nuwe venster"
  echo "Name[an]=Nueva finestra"
  echo "Name[ar]=نافذة جديدة"
  echo "Name[as]=নতুন উইন্ডো"
  echo "Name[ast]=Ventana nueva"
  echo "Name[az]=Yeni Pəncərə"
  echo "Name[be]=Новае акно"
  echo "Name[bg]=Нов прозорец"
  echo "Name[bn_BD]=নতুন উইন্ডো (N)"
  echo "Name[bn_IN]=নতুন উইন্ডো"
  echo "Name[br]=Prenestr nevez"
  echo "Name[brx]=गोदान उइन्ड'(N)"
  echo "Name[bs]=Novi prozor"
  echo "Name[ca]=Finestra nova"
  echo "Name[cak]=K'ak'a' tzuwäch"
  echo "Name[cs]=Nové okno"
  echo "Name[cy]=Ffenestr Newydd"
  echo "Name[da]=Nyt vindue"
  echo "Name[de]=Neues Fenster"
  echo "Name[dsb]=Nowe wokno"
  echo "Name[el]=Νέο παράθυρο"
  echo "Name[en_GB]=New Window"
  echo "Name[en_US]=New Window"
  echo "Name[en_ZA]=New Window"
  echo "Name[eo]=Nova fenestro"
  echo "Name[es_AR]=Nueva ventana"
  echo "Name[es_CL]=Nueva ventana"
  echo "Name[es_ES]=Nueva ventana"
  echo "Name[es_MX]=Nueva ventana"
  echo "Name[et]=Uus aken"
  echo "Name[eu]=Leiho berria"
  echo "Name[fa]=پنجره جدید‌"
  echo "Name[ff]=Henorde Hesere"
  echo "Name[fi]=Uusi ikkuna"
  echo "Name[fr]=Nouvelle fenêtre"
  echo "Name[fy_NL]=Nij finster"
  echo "Name[ga_IE]=Fuinneog Nua"
  echo "Name[gd]=Uinneag ùr"
  echo "Name[gl]=Nova xanela"
  echo "Name[gn]=Ovetã pyahu"
  echo "Name[gu_IN]=નવી વિન્ડો"
  echo "Name[he]=חלון חדש"
  echo "Name[hi_IN]=नया विंडो"
  echo "Name[hr]=Novi prozor"
  echo "Name[hsb]=Nowe wokno"
  echo "Name[hu]=Új ablak"
  echo "Name[hy_AM]=Նոր Պատուհան"
  echo "Name[id]=Jendela Baru"
  echo "Name[is]=Nýr gluggi"
  echo "Name[it]=Nuova finestra"
  echo "Name[ja]=新しいウィンドウ"
  echo "Name[ja_JP-mac]=新規ウインドウ"
  echo "Name[ka]=ახალი ფანჯარა"
  echo "Name[kk]=Жаңа терезе"
  echo "Name[km]=បង្អួច​​​ថ្មី"
  echo "Name[kn]=ಹೊಸ ಕಿಟಕಿ"
  echo "Name[ko]=새 창"
  echo "Name[kok]=नवें जनेल"
  echo "Name[ks]=نئئ وِنڈو"
  echo "Name[lij]=Neuvo barcon"
  echo "Name[lo]=ຫນ້າຕ່າງໃຫມ່"
  echo "Name[lt]=Naujas langas"
  echo "Name[ltg]=Jauns lūgs"
  echo "Name[lv]=Jauns logs"
  echo "Name[mai]=नव विंडो"
  echo "Name[mk]=Нов прозорец"
  echo "Name[ml]=പുതിയ ജാലകം"
  echo "Name[mr]=नवीन पटल"
  echo "Name[ms]=Tetingkap Baru"
  echo "Name[my]=ဝင်းဒိုးအသစ်"
  echo "Name[nb_NO]=Nytt vindu"
  echo "Name[ne_NP]=नयाँ सञ्झ्याल"
  echo "Name[nl]=Nieuw venster"
  echo "Name[nn_NO]=Nytt vindauge"
  echo "Name[or]=ନୂତନ ୱିଣ୍ଡୋ"
  echo "Name[pa_IN]=ਨਵੀਂ ਵਿੰਡੋ"
  echo "Name[pl]=Nowe okno"
  echo "Name[pt_BR]=Nova janela"
  echo "Name[pt_PT]=Nova janela"
  echo "Name[rm]=Nova fanestra"
  echo "Name[ro]=Fereastră nouă"
  echo "Name[ru]=Новое окно"
  echo "Name[sat]=नावा विंडो (N)"
  echo "Name[si]=නව කවුළුවක්"
  echo "Name[sk]=Nové okno"
  echo "Name[sl]=Novo okno"
  echo "Name[son]=Zanfun taaga"
  echo "Name[sq]=Dritare e Re"
  echo "Name[sr]=Нови прозор"
  echo "Name[sv_SE]=Nytt fönster"
  echo "Name[ta]=புதிய சாளரம்"
  echo "Name[te]=కొత్త విండో"
  echo "Name[th]=หน้าต่างใหม่"
  echo "Name[tr]=Yeni pencere"
  echo "Name[tsz]=Eraatarakua jimpani"
  echo "Name[uk]=Нове вікно"
  echo "Name[ur]=نیا دریچہ"
  echo "Name[uz]=Yangi oyna"
  echo "Name[vi]=Cửa sổ mới"
  echo "Name[wo]=Palanteer bu bees"
  echo "Name[xh]=Ifestile entsha"
  echo "Name[zh_CN]=新建窗口"
  echo "Name[zh_TW]=開新視窗"
  echo "Exec=${installation_dir}/firefox --new-window %u"
  echo ""
  echo "[Desktop Action new-private-window]"
  echo "Name=Open a New Private Window"
  echo "Name[ach]=Dirica manyen me mung"
  echo "Name[af]=Nuwe privaatvenster"
  echo "Name[an]=Nueva finestra privada"
  echo "Name[ar]=نافذة خاصة جديدة"
  echo "Name[as]=নতুন ব্যক্তিগত উইন্ডো"
  echo "Name[ast]=Ventana privada nueva"
  echo "Name[az]=Yeni Məxfi Pəncərə"
  echo "Name[be]=Новае акно адасаблення"
  echo "Name[bg]=Нов прозорец за поверително сърфиране"
  echo "Name[bn_BD]=নতুন ব্যক্তিগত উইন্ডো"
  echo "Name[bn_IN]=নতুন ব্যক্তিগত উইন্ডো"
  echo "Name[br]=Prenestr merdeiñ prevez nevez"
  echo "Name[brx]=गोदान प्राइभेट उइन्ड'"
  echo "Name[bs]=Novi privatni prozor"
  echo "Name[ca]=Finestra privada nova"
  echo "Name[cak]=K'ak'a' ichinan tzuwäch"
  echo "Name[cs]=Nové anonymní okno"
  echo "Name[cy]=Ffenestr Breifat Newydd"
  echo "Name[da]=Nyt privat vindue"
  echo "Name[de]=Neues privates Fenster"
  echo "Name[dsb]=Nowe priwatne wokno"
  echo "Name[el]=Νέο παράθυρο ιδιωτικής περιήγησης"
  echo "Name[en_GB]=New Private Window"
  echo "Name[en_US]=New Private Window"
  echo "Name[en_ZA]=New Private Window"
  echo "Name[eo]=Nova privata fenestro"
  echo "Name[es_AR]=Nueva ventana privada"
  echo "Name[es_CL]=Nueva ventana privada"
  echo "Name[es_ES]=Nueva ventana privada"
  echo "Name[es_MX]=Nueva ventana privada"
  echo "Name[et]=Uus privaatne aken"
  echo "Name[eu]=Leiho pribatu berria"
  echo "Name[fa]=پنجره ناشناس جدید"
  echo "Name[ff]=Henorde Suturo Hesere"
  echo "Name[fi]=Uusi yksityinen ikkuna"
  echo "Name[fr]=Nouvelle fenêtre de navigation privée"
  echo "Name[fy_NL]=Nij priveefinster"
  echo "Name[ga_IE]=Fuinneog Nua Phríobháideach"
  echo "Name[gd]=Uinneag phrìobhaideach ùr"
  echo "Name[gl]=Nova xanela privada"
  echo "Name[gn]=Ovetã ñemi pyahu"
  echo "Name[gu_IN]=નવી ખાનગી વિન્ડો"
  echo "Name[he]=חלון פרטי חדש"
  echo "Name[hi_IN]=नयी निजी विंडो"
  echo "Name[hr]=Novi privatni prozor"
  echo "Name[hsb]=Nowe priwatne wokno"
  echo "Name[hu]=Új privát ablak"
  echo "Name[hy_AM]=Սկսել Գաղտնի դիտարկում"
  echo "Name[id]=Jendela Mode Pribadi Baru"
  echo "Name[is]=Nýr huliðsgluggi"
  echo "Name[it]=Nuova finestra anonima"
  echo "Name[ja]=新しいプライベートウィンドウ"
  echo "Name[ja_JP-mac]=新規プライベートウインドウ"
  echo "Name[ka]=ახალი პირადი ფანჯარა"
  echo "Name[kk]=Жаңа жекелік терезе"
  echo "Name[km]=បង្អួច​ឯកជន​ថ្មី"
  echo "Name[kn]=ಹೊಸ ಖಾಸಗಿ ಕಿಟಕಿ"
  echo "Name[ko]=새 사생활 보호 모드"
  echo "Name[kok]=नवो खाजगी विंडो"
  echo "Name[ks]=نْو پرایوٹ وینڈو&amp;"
  echo "Name[lij]=Neuvo barcon privou"
  echo "Name[lo]=ເປີດຫນ້າຕ່າງສວນຕົວຂື້ນມາໃຫມ່"
  echo "Name[lt]=Naujas privataus naršymo langas"
  echo "Name[ltg]=Jauns privatais lūgs"
  echo "Name[lv]=Jauns privātais logs"
  echo "Name[mai]=नया निज विंडो (W)"
  echo "Name[mk]=Нов приватен прозорец"
  echo "Name[ml]=പുതിയ സ്വകാര്യ ജാലകം"
  echo "Name[mr]=नवीन वैयक्तिक पटल"
  echo "Name[ms]=Tetingkap Persendirian Baharu"
  echo "Name[my]=New Private Window"
  echo "Name[nb_NO]=Nytt privat vindu"
  echo "Name[ne_NP]=नयाँ निजी सञ्झ्याल"
  echo "Name[nl]=Nieuw privévenster"
  echo "Name[nn_NO]=Nytt privat vindauge"
  echo "Name[or]=ନୂତନ ବ୍ୟକ୍ତିଗତ ୱିଣ୍ଡୋ"
  echo "Name[pa_IN]=ਨਵੀਂ ਪ੍ਰਾਈਵੇਟ ਵਿੰਡੋ"
  echo "Name[pl]=Nowe okno prywatne"
  echo "Name[pt_BR]=Nova janela privativa"
  echo "Name[pt_PT]=Nova janela privada"
  echo "Name[rm]=Nova fanestra privata"
  echo "Name[ro]=Fereastră privată nouă"
  echo "Name[ru]=Новое приватное окно"
  echo "Name[sat]=नावा निजेराक् विंडो (W )"
  echo "Name[si]=නව පුද්ගලික කවුළුව (W)"
  echo "Name[sk]=Nové okno v režime Súkromné prehliadanie"
  echo "Name[sl]=Novo zasebno okno"
  echo "Name[son]=Sutura zanfun taaga"
  echo "Name[sq]=Dritare e Re Private"
  echo "Name[sr]=Нови приватан прозор"
  echo "Name[sv_SE]=Nytt privat fönster"
  echo "Name[ta]=புதிய தனிப்பட்ட சாளரம்"
  echo "Name[te]=కొత్త ఆంతరంగిక విండో"
  echo "Name[th]=หน้าต่างส่วนตัวใหม่"
  echo "Name[tr]=Yeni gizli pencere"
  echo "Name[tsz]=Juchiiti eraatarakua jimpani"
  echo "Name[uk]=Приватне вікно"
  echo "Name[ur]=نیا نجی دریچہ"
  echo "Name[uz]=Yangi maxfiy oyna"
  echo "Name[vi]=Cửa sổ riêng tư mới"
  echo "Name[wo]=Panlanteeru biir bu bees"
  echo "Name[xh]=Ifestile yangasese entsha"
  echo "Name[zh_CN]=新建隐私浏览窗口"
  echo "Name[zh_TW]=新增隱私視窗"
  echo "Exec=${installation_dir}/firefox --private-window %u"
  echo ""
  echo "[Desktop Action profile-manager-window]"
  echo "Name=Open the Profile Manager"
  echo "Name[cs]=Správa profilů"
  echo "Name[de]=Profilverwaltung öffnen"
  echo "Exec=${installation_dir}/firefox --ProfileManager"
} > "$HOME/.local/share/applications/firefox-nightly.desktop"